<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全方位AI代理監控系統</title>
	<link rel="stylesheet" href="static/css/admin.css">
</head>
<body>
    <!-- 二進制背景 -->
    <div id="binary-background"></div>
    <div class="grid-background"></div>

    <!-- 登入頁面 -->
    <div id="login-page">
        <div class="login-container">
            <div class="status-indicator"></div>
            <h1 class="system-title">全方位AI代理監控系統</h1>
            <h2 class="login-title">管理者模式</h2>	
            <div id="login-message"></div>
            <form id="loginForm">
                <div class="input-group">
                    <input type="text" class="input-field" placeholder="管理員帳號" id="admin_id" required>
                    <div class="input-icon">👤</div>
                </div>
                <div class="input-group">
                    <input type="password" class="input-field" placeholder="密碼" id="admin_password" required>
                    <div class="input-icon">🔒</div>
                </div>
                <button id="quick-login" type="button" class="login-button">快速登入 (Admin)</button>
                <button id="login" type="button" class="login-button">登入系統</button>
            </form>
        </div>
    </div>

    <!-- 管理頁面 -->
    <div id="dashboard-page">
        <div class="main-container">
            <div class="header">
                <div>
                    <h1 class="system-title">全方位AI代理監控系統</h1>
                    <div style="font-size: 14px; color: #666; margin-top: 5px;">管理者模式</div>
                </div>
                <div class="user-info">
					<button class="logout-manage-btn" id="btn-device-manage">裝置管理</button> 
					<button class="logout-manage-btn" id="btn-model-manage">模型管理</button>
                    <div class="status-indicator"></div>
                    <span id="admin_id-display">管理員</span>
                    <button class="logout-btn" onclick="logout()">登出</button>
                </div>
            </div>

			<!-- 新增裝置 -->
			<div class="control-panel" id="add-device-panel">
				<h2 class="panel-title">新增裝置</h2>
				<form id="add-device-form" method="POST">
					<div id="add-deviceMessage"></div>
					<button class="btn btn-primary">新增裝置 ⊕</button>
				</form>
			</div>
			<div class="control-panel" id="device-list-panel">
				<h2 class="panel-title">裝置列表</h2>
				<div id="devices-message"></div>
				<button class="btn btn-secondary" onclick="loadDevices()">重新整理</button>
				<table class="models-table" id="devices-table">
                    <thead>
                        <tr>
                            <th>裝置 ID</th>
                            <th>使用者 ID</th>
                            <th>製造日期</th>
                            <th>包含模型</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="devices-tbody"></tbody>
                </table>
			</div>
			
			<!-- 編輯裝置模態框 -->
			<div id="edit-device-modal" class="modal">
				<div class="modal-content">
					<span class="close" onclick="closeEditDeviceModal()">&times;</span>
					<h2>編輯裝置</h2>
					<div id="edit-device-message"></div>
					<form id="edit-device-form">
						<input type="hidden" id="edit-device-id">
						<div class="form-group">
							<label>使用者 ID</label>
							<input type="text" id="edit-user-id">
						</div>
						<div style="margin-top:20px;">
							<button type="submit" class="btn btn-primary">更新裝置</button>
							<button type="button" class="btn btn-secondary" onclick="closeEditDeviceModal()">取消</button>
						</div>
					</form>
				</div>
			</div>

            <!-- 新增模型控制面板 -->
            <div class="control-panel" id="add-model-panel">
                <h2 class="panel-title">新增模型</h2>
				<form id="add-model-form" enctype="multipart/form-data">
					<div class="form-group">
						<label class="form-label">模型名稱</label>
						<input type="text" class="model-infor" id="model-name" required>
					</div>
					<div class="form-group">
						<label class="form-label">模型版本</label>
						<input type="text" class="model-infor" id="model-version" required>
					</div>
					<div class="form-group">
						<label class="form-label">事件類型</label>
						<input type="text" class="model-infor" id="event-type" required placeholder="以逗號分隔">
					</div>
					<div class="form-group">
						<label class="form-label">事件函式檔 (.py)</label>
						<div id="event-drop-py" class="drop-area">拖拉檔案或點擊這裡上傳</div>
						<input type="file" id="event-file-input-py" accept=".py" style="display:none;">
						<div id="file-list-box-py" class="file-list-box"></div>
					</div>
					<div class="form-group">
						<label class="form-label">模型檔 (.pt)</label>
						<div id="event-drop-pt" class="drop-area">拖拉檔案或點擊這裡上傳</div>
						<input type="file" id="event-file-input-pt" accept=".pt" style="display:none;">
						<div id="file-list-box-pt" class="file-list-box"></div>
					</div>
					<div id="add-message"></div>
					<button type="submit" class="btn btn-primary">新增模型 ⊕</button>
				</form>
            </div>

            <!-- 模型列表 -->
            <div class="models-section" id="model-list-panel">
                <h2 class="panel-title">模型列表</h2>
                <div id="models-message"></div>
                <button class="btn btn-secondary" onclick="loadModels()">重新整理</button>
                <table class="models-table" id="models-table">
                    <thead>
                        <tr>
                            <th>序號</th>
                            <th>模型名稱</th>
                            <th>版本</th>
                            <th>事件類型</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="models-tbody"></tbody>
                </table>
            </div>
        </div>
    </div>

	<!-- 編輯模型模態框 -->
	<div id="edit-modal" class="modal">
		<div class="modal-content">
			<span class="close" onclick="closeEditModal()">&times;</span>
			<h2>編輯模型</h2>
			<div id="edit-message"></div>
			<form id="edit-model-form">
				<input type="hidden" id="edit-model-id">
				<div class="form-group">
					<label class="form-label">模型名稱</label>
					<input type="text" id="edit-model-name" class="model-infor">
				</div>
				<div class="form-group">
					<label class="form-label">模型版本</label>
					<input type="text" id="edit-model-version" class="model-infor">
				</div>
				<div class="form-group">
					<label class="form-label">事件類型</label>
					<input type="text" id="edit-event-type" class="model-infor">
				</div>
				<div class="form-group">
					<label class="form-label">事件函式檔 (.py)</label>
					<div id="edit-event-drop-py" class="drop-area">拖拉檔案或點擊這裡上傳</div>
					<input type="file" id="edit-event-file-input-py" accept=".py" style="display:none;">
					<ul id="edit-file-list-py" class="file-list"></ul>
				</div>
				<div class="form-group">
					<label class="form-label">模型檔 (.pt)</label>
					<div id="edit-event-drop-pt" class="drop-area">拖拉檔案或點擊這裡上傳</div>
					<input type="file" id="edit-event-file-input-pt" accept=".pt" style="display:none;">
					<ul id="edit-file-list-pt" class="file-list"></ul>
				</div>
				<div style="margin-top:20px;">
					<button type="submit" class="btn btn-primary">更新模型</button>
					<button type="button" class="btn btn-secondary" onclick="closeEditModal()">取消</button>
				</div>
			</form>
		</div>
	</div>

	<script src="static/js/admin.js"></script>

</body>
</html>
