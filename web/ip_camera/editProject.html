<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>ç·¨è¼¯å°ˆæ¡ˆ - ip camera</title>
    
    <script src="/static/js/header.js"></script>
    <link rel="stylesheet" href="/static/css/header.css">
</head>
<body>
    <style>
```css
html, body {
    margin: 0;
    padding: 0;
    background: #ffffff;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    overflow-x: hidden;
    min-height: 100vh;
    /* éš±è—æ»¾å‹•æ¢ä½†ä¿æŒæ»¾å‹•åŠŸèƒ½ */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
}

html::-webkit-scrollbar,
body::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

.main-content {
    min-height: 100vh;
    position: relative;
    padding-top: 80px;
}

.container {
    position: relative;
    top: 80px;
    left: 50%;
    transform: translateX(-50%);
    width: 700px;
    text-align: center;
}

.step-header {
    background: white;
    color: black;
    padding: 20px;
    border-radius: 16px 16px 0 0;
    margin-bottom: 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 2px solid #f0f0f0;
}

.step-header h1 {
    margin: 0;
    font-size: 28px;
    font-weight: 700;
    color: black;
}

.step-header p {
    margin: 8px 0 0 0;
    opacity: 0.7;
    font-size: 16px;
    color: #666;
}

.step {
    display: none;
    text-align: left;
    background: white;
    padding: 32px;
    border-radius: 0 0 12px 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    border: 2px solid #f0f0f0;
    border-top: none;
    min-height: 400px;
    position: relative;
}

.step.active {
    display: block;
}

.step h2 {
    font-size: 24px;
    margin-bottom: 24px;
    color: black;
    font-weight: 600;
}

.form-group {
    margin-bottom: 24px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: black;
    font-size: 16px;
}

.form-group input[type="text"],
.form-group input[type="datetime-local"],
.form-group input[type="time"],
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 16px;
    transition: all 0.3s ease;
    background-color: #f8f9fa;
    box-sizing: border-box;
    color: #666;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    border-color: #666;
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
    outline: none;
    background-color: white;
}

.checkbox-group {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 12px;
    margin-top: 12px;
}

.checkbox-item {
    display: flex;
    align-items: flex-start;
    padding: 16px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    transition: all 0.3s ease;
    background: white;
}

.checkbox-item:hover {
    border-color: #666;
    background: #f8f9fa;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.checkbox-item input[type="checkbox"] {
    margin-right: 12px;
    margin-top: 2px;
    transform: scale(1.2);
    accent-color: black;
}

.checkbox-item input[type="checkbox"]:checked + .checkbox-content {
    color: black;
}

.checkbox-content h4 {
    margin: 0 0 4px 0;
    font-size: 16px;
    font-weight: 600;
    color: black;
}

.checkbox-content p {
    margin: 0;
    font-size: 14px;
    color: #666;
}

.time-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

/* å°ˆæ¡ˆç‹€æ…‹é¸æ“‡ */
.status-group {
    margin-bottom: 24px;
}

.status-options {
    display: flex;
    gap: 16px;
    margin-top: 12px;
}

.status-option {
    flex: 1;
    padding: 16px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    background: white;
}

.status-option:hover {
    border-color: #666;
    background: #f8f9fa;
}

.status-option.selected {
    border-color: #666;
    background: #f8f9fa;
}

.status-option input[type="radio"] {
    display: none;
}

.status-option .status-icon {
    font-size: 24px;
    margin-bottom: 8px;
}

.status-option .status-title {
    font-weight: 600;
    color: black;
    margin-bottom: 4px;
}

.status-option .status-desc {
    font-size: 14px;
    color: #666;
}

/* å°èˆªæŒ‰éˆ•å®šä½ - ç¬¬ä¸€é åªé¡¯ç¤ºå³é‚Šï¼Œå…¶ä»–é é¢é¡¯ç¤ºå…©é‚Š */
.navigation-buttons {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: calc(100% + 200px);
    left: -100px;
    display: flex;
    justify-content: space-between;
    pointer-events: none;
    z-index: 10;
}

/* æ¡Œé¢ç‰ˆå°èˆªæŒ‰éˆ•æ¨£å¼ */
@media (min-width: 769px) {
    .navigation-buttons {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: calc(100% + 200px);
        left: -100px;
        display: flex;
        justify-content: space-between;
        pointer-events: none;
        z-index: 10;
    }
}

.nav-button {
    background: black;
    border: none;
    cursor: pointer;
    padding: 0;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    pointer-events: auto;
    position: relative;
    overflow: hidden;
}

.nav-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%);
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.nav-button:hover::before {
    opacity: 1;
}

.nav-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.nav-button:disabled {
    opacity: 0.3;
    cursor: not-allowed;
    background: #ccc;
}

.nav-button:disabled:hover {
    transform: none;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.nav-button svg {
    width: 20px;
    height: 20px;
    color: white;
    z-index: 1;
    position: relative;
}

/* é€²åº¦æ¢æ¨£å¼ */
.progress-container {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 5;
}

/* æ‰‹æ©Ÿç‰ˆé€²åº¦æ¢èª¿æ•´ */
@media (max-width: 768px) {
    .progress-container {
        position: absolute;
        bottom: -120px;
        left: 50%;
        transform: translateX(-50%);
        width: calc(100% - 40px);
        max-width: 500px;
    }
    
    .container {
        width: 85%;
        top: 60px;
        margin-bottom: 200px; /* å¢åŠ åº•éƒ¨ç©ºé–“çµ¦é€²åº¦æ¢ */
        transform: translateX(-50%) scale(0.95);
        position: relative; /* ç¢ºä¿é€²åº¦æ¢ç›¸å°å®šä½æœ‰æ•ˆ */
    }
    
    .progress-bar {
        width: 100%;
        height: 55px; /* åŸ35px + 20px */
        margin: 0 auto;
    }

    .progress-text {
        font-size: 16px;
        font-weight: 700;
    }
}

@media (max-width: 480px) {
    .progress-container {
        bottom: -120px;
        width: calc(100% - 30px);
        max-width: 400px;
    }

    .container {
        width: 85%;
        top: 30px;
        margin-bottom: 200px;
        transform: translateX(-50%) scale(0.9);
        position: relative;
    }
    
    .progress-bar {
        width: 100%;
        height: 55px; /* åŸ35px + 20px */
    }

    .progress-text {
        font-size: 15px;
    }
}

.progress-bar {
    width: 600px;
    height: 35px;
    background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
    border-radius: 20px;
    box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
    border: 2px solid #e0e0e0;
}

.progress-bar-fill {
    height: 100%;
    background: linear-gradient(135deg, #333 0%, #000 50%, #333 100%);
    border-radius: 20px;
    transition: width 0.5s ease;
    width: 0%;
    position: relative;
    overflow: hidden;
}

/* æ³¡æ³¡å‹•ç•« */
.progress-bar-fill::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.3) 2px, transparent 2px),
        radial-gradient(circle at 40% 20%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
        radial-gradient(circle at 60% 80%, rgba(255, 255, 255, 0.25) 1.5px, transparent 1.5px),
        radial-gradient(circle at 80% 30%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
        radial-gradient(circle at 90% 70%, rgba(255, 255, 255, 0.3) 2px, transparent 2px);
    background-size: 50px 50px, 30px 30px, 40px 40px, 35px 35px, 45px 45px;
    animation: bubbles 3s linear infinite;
}

@keyframes bubbles {
    0% {
        transform: translateX(-100px);
    }
    100% {
        transform: translateX(100px);
    }
}

.progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-weight: 600;
    font-size: 14px;
    z-index: 1;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.submit-section {
    text-align: center;
    padding: 40px 0;
}

.submit-button {
    background: black;
    color: white;
    border: none;
    padding: 16px 32px;
    border-radius: 50px;
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    position: relative;
    overflow: hidden;
}

.submit-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.submit-button:hover::before {
    left: 100%;
}

.submit-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.preview-section {
    background: white;
    border-radius: 12px;
    padding: 24px;
    margin-top: 24px;
    border: 2px solid #f0f0f0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.preview-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid #e0e0e0;
}

.preview-item:last-child {
    border-bottom: none;
}

.preview-label {
    font-weight: 600;
    color: black;
}

.preview-value {
    color: #666;
}

/* ç«ç®­å’Œç›£è¦–å™¨çˆ†ç‚¸å‹•ç•« */
.rocket-animation {
    position: fixed;
    bottom: 50%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 60px;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
}

.rocket-launch {
    animation: rocketLaunch 2s ease-out forwards;
}

@keyframes rocketLaunch {
    0% {
        opacity: 1;
        transform: translateX(-50%) translateY(0) rotate(0deg);
    }
    100% {
        opacity: 0;
        transform: translateX(-50%) translateY(-300px) rotate(360deg);
    }
}

.camera-explosion {
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    pointer-events: none;
}

.camera-icon {
    position: absolute;
    font-size: 30px;
    opacity: 0;
    color: black;
}

.camera-explode {
    animation: cameraExplode 3s ease-out forwards;
}

@keyframes cameraExplode {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(0.5);
    }
    50% {
        opacity: 1;
        transform: translate(var(--x), var(--y)) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(var(--x), var(--y)) scale(0.5);
    }
}

/* éŸ¿æ‡‰å¼è¨­è¨ˆ */
@media (max-width: 768px) {
    .container {
        width: 85%;
        top: 60px;
        margin-bottom: 200px; /* å¢åŠ åº•éƒ¨ç©ºé–“çµ¦é€²åº¦æ¢ */
        transform: translateX(-50%) scale(0.95);
        position: relative; /* ç¢ºä¿é€²åº¦æ¢ç›¸å°å®šä½æœ‰æ•ˆ */
    }

    .progress-bar {
        width: 100%;
    }

    .progress-container {
        position: absolute;
        bottom: -120px;
        left: 50%;
        transform: translateX(-50%);
        width: calc(100% - 40px);
        max-width: 500px;
    }

    /* æ‰‹æ©Ÿç‰ˆå°èˆªæŒ‰éˆ•é‡æ–°å®šä½ */
    .navigation-buttons {
        position: static;
        width: 100%;
        left: auto;
        transform: none;
        justify-content: center;
        gap: 40px;
        margin-top: 30px;
        margin-bottom: 20px;
        pointer-events: auto;
    }

    .nav-button {
        width: 50px;
        height: 50px;
        position: relative;
    }

    .nav-button svg {
        width: 20px;
        height: 20px;
    }

    .checkbox-group {
        grid-template-columns: 1fr;
    }

    .time-grid {
        grid-template-columns: 1fr;
    }

    .step {
        padding: 24px;
        min-height: 350px;
    }

    .step-header h1 {
        font-size: 24px;
    }

    .step-header p {
        font-size: 14px;
    }

    .status-options {
        flex-direction: column;
        gap: 12px;
    }
}

@media (max-width: 480px) {
    .container {
        width: 85%;
        top: 30px;
        margin-bottom: 200px;
        transform: translateX(-50%) scale(0.9);
        position: relative;
    }
    
    .step {
        padding: 20px;
        min-height: 320px;
    }
    
    .progress-bar {
        width: 85%;
        height: 30px;
    }

    .progress-text {
        font-size: 12px;
    }
    
    .navigation-buttons {
        gap: 30px;
        margin-top: 25px;
    }
    
    .nav-button {
        width: 45px;
        height: 45px;
    }

    .nav-button svg {
        width: 18px;
        height: 18px;
    }

    .step-header h1 {
        font-size: 22px;
    }

    .step-header p {
        font-size: 13px;
    }

    .form-group label {
        font-size: 15px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        font-size: 15px;
        padding: 10px 14px;
    }
}

@media (max-height: 800px) {
    .container {
        top: 30px;
    }
    
    .step {
        min-height: 300px;
    }
    
    .progress-container {
        bottom: 10px;
    }
}

/* ç¾åŒ–æ»¾å‹•æ¢ */
* {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
}

*::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

#cameraInfo {
    padding: 16px; 
    background: white; 
    border-radius: 8px; 
    color: #666; 
    border: 2px solid #f0f0f0;
}

.step h2 {
    color: black;
}

.form-group label {
    color: black;
}

.checkbox-content h4 {
    color: black;
}

.preview-label {
    color: black;
}

.preview-value {
    color: #666;
}

.back-button {
    position: absolute;
    top: 20px;
    left: 20px;
    background: white;
    color: black;
    border: 2px solid #e0e0e0;
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.back-button:hover {
    background: #f8f9fa;
    border-color: black;
}
```


    </style>

    <div id="header-container"></div>

    <div class="main-content">
        <a href="main.html" class="back-button">
            â† è¿”å›å°ˆæ¡ˆåˆ—è¡¨
        </a>

        <div class="container">
            <div class="step-header">
                <h1>ç·¨è¼¯ç›£æ§å°ˆæ¡ˆ</h1>
                <p>ä¿®æ”¹å°ˆæ¡ˆè¨­å®šä¸¦å„²å­˜è®Šæ›´</p>
            </div>

            <form id="multiStepForm">
                <!-- æ­¥é©Ÿ 1: å°ˆæ¡ˆåŸºæœ¬è³‡è¨Š -->
                <div class="step active" id="step1">
                    <h2>æ­¥é©Ÿ 1ï¼šå°ˆæ¡ˆåŸºæœ¬è³‡è¨Š</h2>
                    
                    <div class="form-group">
                        <label for="projectName">å°ˆæ¡ˆåç¨± *</label>
                        <input type="text" id="projectName" name="project_name" placeholder="è«‹è¼¸å…¥å°ˆæ¡ˆåç¨±" required>
                    </div>

                    <div class="form-group">
                        <label for="projectDescription">å°ˆæ¡ˆæè¿°</label>
                        <textarea id="projectDescription" name="project_description" rows="3" placeholder="è«‹è¼¸å…¥å°ˆæ¡ˆæè¿°ï¼ˆé¸å¡«ï¼‰"></textarea>
                    </div>

                    <div class="status-group">
                        <label>å°ˆæ¡ˆç‹€æ…‹ *</label>
                        <div class="status-options">
                            <div class="status-option" onclick="selectStatus('1')">
                                <input type="radio" name="project_status" value="1" id="status_active">
                                <div class="status-icon">ğŸŸ¢</div>
                                <div class="status-title">å•Ÿç”¨</div>
                                <div class="status-desc">å°ˆæ¡ˆæ­£å¸¸é‹ä½œä¸­</div>
                            </div>
                            <div class="status-option" onclick="selectStatus('0')">
                                <input type="radio" name="project_status" value="0" id="status_inactive">
                                <div class="status-icon">ğŸ”´</div>
                                <div class="status-title">åœç”¨</div>
                                <div class="status-desc">å°ˆæ¡ˆæš«åœé‹ä½œ</div>
                            </div>
                        </div>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• - ç¬¬ä¸€é åªé¡¯ç¤ºå³é‚Š -->
                    <div class="navigation-buttons">
                        <div></div> <!-- ç©ºçš„å·¦å´ -->
                        <button type="button" class="nav-button" onclick="nextStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ 2: é¸æ“‡æ”å½±æ©Ÿ -->
                <div class="step" id="step2">
                    <h2>æ­¥é©Ÿ 2ï¼šé¸æ“‡æ”å½±æ©Ÿ</h2>
                    
                    <div class="form-group">
                        <label for="cameraSelect">æ”å½±æ©Ÿ *</label>
                        <select id="cameraSelect" name="camera_id" required>
                            <option value="">-- è«‹é¸æ“‡æ”å½±æ©Ÿ --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>æ”å½±æ©Ÿè³‡è¨Š</label>
                        <div id="cameraInfo">
                            è«‹å…ˆé¸æ“‡æ”å½±æ©Ÿä»¥æŸ¥çœ‹è©³ç´°è³‡è¨Š
                        </div>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• - å…©é‚Šéƒ½é¡¯ç¤º -->
                    <div class="navigation-buttons">
                        <button type="button" class="nav-button" onclick="prevStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button type="button" class="nav-button" onclick="nextStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ 3: é¸æ“‡ AI æ¨¡å‹ -->
                <div class="step" id="step3">
                    <h2>æ­¥é©Ÿ 3ï¼šé¸æ“‡ AI ç›£æ§æ¨¡å‹</h2>
                    
                    <div class="form-group">
                        <label>è«‹é¸æ“‡è¦ä½¿ç”¨çš„ AI æ¨¡å‹ï¼š</label>
                        <div class="checkbox-group" id="modelsContainer">
                            <!-- æ¨¡å‹é¸é …å°‡ç”± JavaScript å‹•æ…‹è¼‰å…¥ -->
                        </div>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• -->
                    <div class="navigation-buttons">
                        <button type="button" class="nav-button" onclick="prevStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button type="button" class="nav-button" onclick="nextStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ 4: é¸æ“‡äº‹ä»¶é¡å‹ -->
                <div class="step" id="step4">
                    <h2>æ­¥é©Ÿ 4ï¼šé¸æ“‡ç›£æ§äº‹ä»¶</h2>
                    
                    <div class="form-group">
                        <label>è«‹é¸æ“‡è¦ç›£æ§çš„äº‹ä»¶é¡å‹ï¼š</label>
                        <div class="checkbox-group" id="eventsContainer">
                            <!-- äº‹ä»¶é¸é …å°‡ç”± JavaScript å‹•æ…‹è¼‰å…¥ -->
                        </div>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• -->
                    <div class="navigation-buttons">
                        <button type="button" class="nav-button" onclick="prevStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button type="button" class="nav-button" onclick="nextStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ 5: é¸æ“‡è¯çµ¡äºº -->
                <div class="step" id="step5">
                    <h2>æ­¥é©Ÿ 5ï¼šé¸æ“‡é€šçŸ¥è¯çµ¡äºº</h2>
                    
                    <div class="form-group">
                        <label>è«‹é¸æ“‡æ¥æ”¶è­¦å ±é€šçŸ¥çš„è¯çµ¡äººï¼š</label>
                        <div class="checkbox-group" id="contactsContainer">
                            <!-- è¯çµ¡äººé¸é …å°‡ç”± JavaScript å‹•æ…‹è¼‰å…¥ -->
                        </div>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• -->
                    <div class="navigation-buttons">
                        <button type="button" class="nav-button" onclick="prevStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button type="button" class="nav-button" onclick="nextStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ 6: é‹ä½œæ™‚é–“è¨­å®š -->
                <div class="step" id="step6">
                    <h2>æ­¥é©Ÿ 6ï¼šé‹ä½œæ™‚é–“è¨­å®š</h2>
                    
                    <div class="form-group">
                        <label for="startDateTime">é–‹å§‹æ™‚é–“ *</label>
                        <input type="datetime-local" id="startDateTime" name="start_time" required>
                    </div>

                    <div class="form-group">
                        <label>æ¯æ—¥é‹ä½œæ™‚é–“</label>
                        <div class="time-grid">
                            <div>
                                <label for="dailyStartTime">é–‹å§‹æ™‚é–“</label>
                                <input type="time" id="dailyStartTime" name="daily_start_time" value="00:00">
                            </div>
                            <div>
                                <label for="dailyEndTime">çµæŸæ™‚é–“</label>
                                <input type="time" id="dailyEndTime" name="daily_end_time" value="23:59">
                            </div>
                        </div>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• -->
                    <div class="navigation-buttons">
                        <button type="button" class="nav-button" onclick="prevStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button type="button" class="nav-button" onclick="nextStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ 7: é€šçŸ¥æ™‚é–“è¨­å®š -->
                <div class="step" id="step7">
                    <h2>æ­¥é©Ÿ 7ï¼šé€šçŸ¥æ™‚é–“è¨­å®š</h2>
                    
                    <div class="form-group">
                        <label>é€šçŸ¥æ™‚é–“ç¯„åœ</label>
                        <div class="time-grid">
                            <div>
                                <label for="notifyStartTime">é€šçŸ¥é–‹å§‹æ™‚é–“</label>
                                <input type="time" id="notifyStartTime" name="notify_start_time" value="08:00">
                            </div>
                            <div>
                                <label for="notifyEndTime">é€šçŸ¥çµæŸæ™‚é–“</label>
                                <input type="time" id="notifyEndTime" name="notify_end_time" value="18:00">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="notifyInterval">é€šçŸ¥é–“éš”ï¼ˆåˆ†é˜ï¼‰</label>
                        <select id="notifyInterval" name="notify_interval">
                            <option value="5">5 åˆ†é˜</option>
                            <option value="10" selected>10 åˆ†é˜</option>
                            <option value="15">15 åˆ†é˜</option>
                            <option value="30">30 åˆ†é˜</option>
                            <option value="60">60 åˆ†é˜</option>
                        </select>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• -->
                    <div class="navigation-buttons">
                        <button type="button" class="nav-button" onclick="prevStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button type="button" class="nav-button" onclick="nextStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- æ­¥é©Ÿ 8: ç¢ºèªèˆ‡æäº¤ -->
                <div class="step" id="step8">
                    <h2>æ­¥é©Ÿ 8ï¼šç¢ºèªå°ˆæ¡ˆè³‡è¨Š</h2>
                    
                    <div class="preview-section" id="previewSection">
                        <!-- é è¦½å…§å®¹å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
                    </div>

                    <div class="submit-section">
                        <button type="submit" class="submit-button">
                            ğŸ’¾ å„²å­˜è®Šæ›´
                        </button>
                    </div>

                    <!-- å°èˆªæŒ‰éˆ• - æœ€å¾Œä¸€é åªé¡¯ç¤ºå·¦é‚Š -->
                    <div class="navigation-buttons">
                        <button type="button" class="nav-button" onclick="prevStep()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <div></div> <!-- ç©ºçš„å³å´ -->
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- ç«ç®­å‹•ç•«å…ƒç´  -->
    <div class="rocket-animation" id="rocketAnimation">ğŸš€</div>

    <!-- ç›£è¦–å™¨çˆ†ç‚¸å‹•ç•«å®¹å™¨ -->
    <div class="camera-explosion" id="cameraExplosion"></div>

    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-bar-fill" id="progressBarFill"></div>
            <div class="progress-text" id="progressText">1 / 8</div>
        </div>
    </div>

    <script>
        // æ¨¡æ“¬è³‡æ–™
        const mockCameras = [
            { camera_id: 1, camera_name: "å‰é–€æ”å½±æ©Ÿ", location: "ä¸»å…¥å£", resolution: "1920x1080", status: "ç·šä¸Š" },
            { camera_id: 2, camera_name: "å¾Œé–€æ”å½±æ©Ÿ", location: "å¾Œæ–¹å‡ºå…¥å£", resolution: "1920x1080", status: "ç·šä¸Š" },
            { camera_id: 3, camera_name: "åœè»Šå ´æ”å½±æ©Ÿ", location: "åœè»Šå ´å€åŸŸ", resolution: "2560x1440", status: "ç·šä¸Š" },
            { camera_id: 4, camera_name: "è¾¦å…¬å®¤æ”å½±æ©Ÿ", location: "è¾¦å…¬å€åŸŸ", resolution: "1920x1080", status: "é›¢ç·š" },
            { camera_id: 5, camera_name: "å€‰åº«æ”å½±æ©Ÿ", location: "å€‰å„²å€åŸŸ", resolution: "1920x1080", status: "ç·šä¸Š" }
        ];

        const mockModels = [
            { model_id: 1, model_name: "äººè‡‰è¾¨è­˜", model_description: "è­˜åˆ¥å’Œè¿½è¹¤äººè‡‰ï¼Œæ”¯æ´èº«ä»½é©—è­‰" },
            { model_id: 2, model_name: "è»Šç‰Œè¾¨è­˜", model_description: "è‡ªå‹•è­˜åˆ¥è»Šç‰Œè™Ÿç¢¼ï¼Œè¨˜éŒ„é€²å‡ºè»Šè¼›" },
            { model_id: 3, model_name: "è¡Œç‚ºåˆ†æ", model_description: "åˆ†æç•°å¸¸è¡Œç‚ºæ¨¡å¼ï¼Œå¦‚è·Œå€’ã€æ‰“é¬¥ç­‰" },
            { model_id: 4, model_name: "ç‰©é«”åµæ¸¬", model_description: "åµæ¸¬ç‰¹å®šç‰©é«”ï¼Œå¦‚åŒ…è£¹ã€æ­¦å™¨ç­‰" },
            { model_id: 5, model_name: "äººæ•¸çµ±è¨ˆ", model_description: "çµ±è¨ˆå€åŸŸå…§äººæ•¸ï¼Œç›£æ§äººæµå¯†åº¦" }
        ];

        const mockEvents = [
            { event_id: 1, event_name: "å…¥ä¾µè­¦å ±", event_description: "åµæ¸¬åˆ°æœªæˆæ¬Šäººå“¡é€²å…¥ç¦å€" },
            { event_id: 2, event_name: "ç•°å¸¸è¡Œç‚º", event_description: "åµæ¸¬åˆ°å¯ç–‘æˆ–å±éšªè¡Œç‚º" },
            { event_id: 3, event_name: "äººå“¡é€²å…¥", event_description: "åµæ¸¬åˆ°äººå“¡é€²å…¥ç›£æ§å€åŸŸ" },
            { event_id: 4, event_name: "è»Šè¼›é€²å…¥", event_description: "åµæ¸¬åˆ°è»Šè¼›é€²å…¥ç›£æ§å€åŸŸ" },
            { event_id: 5, event_name: "ç‰©å“éºå¤±", event_description: "åµæ¸¬åˆ°ç‰©å“è¢«ç§»å‹•æˆ–éºå¤±" },
            { event_id: 6, event_name: "äººæ•¸è¶…æ¨™", event_description: "å€åŸŸå…§äººæ•¸è¶…éè¨­å®šä¸Šé™" }
        ];

        const mockContacts = [
            { contact_id: 1, contact_name: "å¼µç¶“ç†", contact_phone: "0912-345-678", contact_email: "manager@company.com" },
            { contact_id: 2, contact_name: "æä¿å…¨", contact_phone: "0923-456-789", contact_email: "security@company.com" },
            { contact_id: 3, contact_name: "ç‹å·¥ç¨‹å¸«", contact_phone: "0934-567-890", contact_email: "engineer@company.com" },
            { contact_id: 4, contact_name: "é™³ä¸»ä»»", contact_phone: "0945-678-901", contact_email: "director@company.com" }
        ];

        // æ¨¡æ“¬ç¾æœ‰å°ˆæ¡ˆè³‡æ–™
        const mockProjectData = {
            1: {
                project_name: "å‰é–€ç›£æ§ç³»çµ±",
                project_description: "ä¸»å…¥å£äººè‡‰è¾¨è­˜èˆ‡è»Šç‰Œè­˜åˆ¥ç³»çµ±",
                project_status: "1",
                camera_id: 1,
                model_ids: [1, 2],
                event_ids: [1, 3],
                contact_ids: [1, 2],
                start_time: "2024-01-15T08:00",
                daily_start_time: "08:00",
                daily_end_time: "18:00",
                notify_start_time: "08:00",
                notify_end_time: "18:00",
                notify_interval: 10
            },
            2: {
                project_name: "åœè»Šå ´å®‰å…¨ç›£æ§",
                project_description: "åœè»Šå ´å€åŸŸç•°å¸¸è¡Œç‚ºåµæ¸¬",
                project_status: "1",
                camera_id: 3,
                model_ids: [2],
                event_ids: [1, 2],
                contact_ids: [1, 3],
                start_time: "2024-01-10T00:00",
                daily_start_time: "00:00",
                daily_end_time: "23:59",
                notify_start_time: "08:00",
                notify_end_time: "18:00",
                notify_interval: 15
            },
            3: {
                project_name: "å¾Œé–€å€åŸŸç›£æ§",
                project_description: "å¾Œæ–¹å‡ºå…¥å£å®‰å…¨ç›£æ§",
                project_status: "0",
                camera_id: 2,
                model_ids: [1, 2, 3],
                event_ids: [1],
                contact_ids: [2],
                start_time: "2024-01-12T06:00",
                daily_start_time: "06:00",
                daily_end_time: "22:00",
                notify_start_time: "08:00",
                notify_end_time: "18:00",
                notify_interval: 10
            }
        };

        // å…¨åŸŸè®Šæ•¸
        const steps = document.querySelectorAll(".step");
        const progressBarFill = document.getElementById("progressBarFill");
        const progressText = document.getElementById("progressText");

        let currentStep = 0;
        let projectId = null;

        // è¼‰å…¥ header
        function loadHeader() {
            console.log('Header loaded');
        }

        // é¸æ“‡å°ˆæ¡ˆç‹€æ…‹
        function selectStatus(status) {
            // ç§»é™¤æ‰€æœ‰é¸é …çš„ selected é¡åˆ¥
            document.querySelectorAll('.status-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // æ·»åŠ é¸ä¸­ç‹€æ…‹
            event.currentTarget.classList.add('selected');
            
            // è¨­å®š radio button
            document.getElementById(status === '1' ? 'status_active' : 'status_inactive').checked = true;
        }

        // ç²å–URLåƒæ•¸
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // è¼‰å…¥å°ˆæ¡ˆè³‡æ–™
        function loadProjectData() {
            projectId = getUrlParameter('id');
            if (projectId && mockProjectData[projectId]) {
                const data = mockProjectData[projectId];
                
                // å¡«å…¥åŸºæœ¬è³‡è¨Š
                document.getElementById('projectName').value = data.project_name;
                document.getElementById('projectDescription').value = data.project_description;
                
                // è¨­å®šå°ˆæ¡ˆç‹€æ…‹
                selectStatus(data.project_status);
                document.getElementById(data.project_status === '1' ? 'status_active' : 'status_inactive').checked = true;
                
                // è¨­å®šæ”å½±æ©Ÿ
                document.getElementById('cameraSelect').value = data.camera_id;
                
                // è¨­å®šæ™‚é–“
                document.getElementById('startDateTime').value = data.start_time;
                document.getElementById('dailyStartTime').value = data.daily_start_time;
                document.getElementById('dailyEndTime').value = data.daily_end_time;
                document.getElementById('notifyStartTime').value = data.notify_start_time;
                document.getElementById('notifyEndTime').value = data.notify_end_time;
                document.getElementById('notifyInterval').value = data.notify_interval;
                
                // è¨­å®šé¸ä¸­çš„æ¨¡å‹
                setTimeout(() => {
                    data.model_ids.forEach(id => {
                        const checkbox = document.getElementById(`model_${id}`);
                        if (checkbox) checkbox.checked = true;
                    });
                    
                    // è¨­å®šé¸ä¸­çš„äº‹ä»¶
                    data.event_ids.forEach(id => {
                        const checkbox = document.getElementById(`event_${id}`);
                        if (checkbox) checkbox.checked = true;
                    });
                    
                    // è¨­å®šé¸ä¸­çš„è¯çµ¡äºº
                    data.contact_ids.forEach(id => {
                        const checkbox = document.getElementById(`contact_${id}`);
                        if (checkbox) checkbox.checked = true;
                    });
                    
                    // æ›´æ–°æ”å½±æ©Ÿè³‡è¨Š
                    const cameraSelect = document.getElementById('cameraSelect');
                    if (cameraSelect.value) {
                        const event = new Event('change');
                        cameraSelect.dispatchEvent(event);
                    }
                }, 100);
            }
        }

        // æ›´æ–°é€²åº¦æ¢
        function updateProgress() {
            const percentage = ((currentStep + 1) / steps.length) * 100;
            progressBarFill.style.width = percentage + "%";
            progressText.textContent = `${currentStep + 1} / ${steps.length}`;
        }

        // é¡¯ç¤ºæŒ‡å®šæ­¥é©Ÿ
        function showStep(index) {
            steps.forEach((step, i) => {
                step.classList.toggle("active", i === index);
            });

            updateProgress();
        }

        // ä¸‹ä¸€æ­¥
        function nextStep() {
            if (validateCurrentStep() && currentStep < steps.length - 1) {
                currentStep++;
                showStep(currentStep);
                
                // å¦‚æœæ˜¯æœ€å¾Œä¸€æ­¥ï¼Œæ›´æ–°é è¦½
                if (currentStep === steps.length - 1) {
                    updatePreview();
                }
            }
        }

        // ä¸Šä¸€æ­¥
        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        }

        // ç«ç®­çˆ†ç‚¸å‹•ç•«
        function playRocketExplosion() {
            const rocket = document.getElementById('rocketAnimation');
            const explosion = document.getElementById('cameraExplosion');
            
            // é¡¯ç¤ºç«ç®­ä¸¦é–‹å§‹ä¸Šå‡å‹•ç•«
            rocket.style.opacity = '1';
            rocket.classList.add('rocket-launch');
            
            // 2ç§’å¾Œé–‹å§‹ç›£è¦–å™¨çˆ†ç‚¸æ•ˆæœ
            setTimeout(() => {
                // å‰µå»ºå¤šå€‹ç›£è¦–å™¨åœ–æ¨™
                for (let i = 0; i < 12; i++) {
                    const camera = document.createElement('div');
                    camera.className = 'camera-icon camera-explode';
                    camera.innerHTML = 'ğŸ“¹';
                    
                    // éš¨æ©Ÿæ–¹å‘å’Œè·é›¢
                    const angle = (i * 30) * Math.PI / 180; // æ¯30åº¦ä¸€å€‹
                    const distance = 100 + Math.random() * 100; // 100-200pxè·é›¢
                    const x = Math.cos(angle) * distance;
                    const y = Math.sin(angle) * distance;
                    
                    camera.style.setProperty('--x', x + 'px');
                    camera.style.setProperty('--y', y + 'px');
                    
                    explosion.appendChild(camera);
                }
                
                // 3ç§’å¾Œæ¸…ç†å‹•ç•«å…ƒç´ 
                setTimeout(() => {
                    rocket.classList.remove('rocket-launch');
                    rocket.style.opacity = '0';
                    explosion.innerHTML = '';
                }, 3000);
            }, 2000);
        }

        // é©—è­‰ç•¶å‰æ­¥é©Ÿ
        function validateCurrentStep() {
            const currentStepElement = steps[currentStep];
            const requiredFields = currentStepElement.querySelectorAll('[required]');
            
            for (let field of requiredFields) {
                if (!field.value.trim()) {
                    alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½');
                    field.focus();
                    return false;
                }
            }

            // ç‰¹æ®Šé©—è­‰
            if (currentStep === 0) { // ç¬¬ä¸€æ­¥ï¼šæª¢æŸ¥å°ˆæ¡ˆç‹€æ…‹
                const statusChecked = document.querySelector('input[name="project_status"]:checked');
                if (!statusChecked) {
                    alert('è«‹é¸æ“‡å°ˆæ¡ˆç‹€æ…‹');
                    return false;
                }
            }

            if (currentStep === 2) { // AI æ¨¡å‹æ­¥é©Ÿ
                const checkedModels = currentStepElement.querySelectorAll('input[name="model_id"]:checked');
                if (checkedModels.length === 0) {
                    alert('è«‹è‡³å°‘é¸æ“‡ä¸€å€‹ AI æ¨¡å‹');
                    return false;
                }
            }

            if (currentStep === 4) { // è¯çµ¡äººæ­¥é©Ÿ
                const checkedContacts = currentStepElement.querySelectorAll('input[name="contact_id"]:checked');
                if (checkedContacts.length === 0) {
                    alert('è«‹è‡³å°‘é¸æ“‡ä¸€å€‹è¯çµ¡äºº');
                    return false;
                }
            }

            return true;
        }

        // è¼‰å…¥æ”å½±æ©Ÿé¸é …
        function loadCameras() {
            const cameraSelect = document.getElementById('cameraSelect');
            cameraSelect.innerHTML = '<option value="">-- è«‹é¸æ“‡æ”å½±æ©Ÿ --</option>';
            
            mockCameras.forEach(camera => {
                const option = document.createElement('option');
                option.value = camera.camera_id;
                option.textContent = `${camera.camera_name} (${camera.location})`;
                option.dataset.camera = JSON.stringify(camera);
                cameraSelect.appendChild(option);
            });

            // ç¶å®šé¸æ“‡äº‹ä»¶
            cameraSelect.addEventListener('change', function() {
                const cameraInfo = document.getElementById('cameraInfo');
                if (this.value) {
                    const camera = JSON.parse(this.selectedOptions[0].dataset.camera);
                    cameraInfo.innerHTML = `
                        <strong>${camera.camera_name}</strong><br>
                        ğŸ“ ä½ç½®ï¼š${camera.location}<br>
                        ğŸ“º è§£æåº¦ï¼š${camera.resolution}<br>
                        ğŸ”´ ç‹€æ…‹ï¼š<span style="color: ${camera.status === 'ç·šä¸Š' ? '#ffffff' : '#dc3545'}">${camera.status}</span>
                    `;
                } else {
                    cameraInfo.textContent = 'è«‹å…ˆé¸æ“‡æ”å½±æ©Ÿä»¥æŸ¥çœ‹è©³ç´°è³‡è¨Š';
                }
            });
        }

        // è¼‰å…¥ AI æ¨¡å‹é¸é …
        function loadModels() {
            const modelsContainer = document.getElementById('modelsContainer');
            modelsContainer.innerHTML = '';
            
            mockModels.forEach(model => {
                const checkboxItem = document.createElement('div');
                checkboxItem.className = 'checkbox-item';
                
                checkboxItem.innerHTML = `
                    <input type="checkbox" id="model_${model.model_id}" name="model_id" value="${model.model_id}">
                    <div class="checkbox-content">
                        <h4>${model.model_name}</h4>
                        <p>${model.model_description}</p>
                    </div>
                `;
                
                modelsContainer.appendChild(checkboxItem);
            });
        }

        // è¼‰å…¥äº‹ä»¶é¸é …
        function loadEvents() {
            const eventsContainer = document.getElementById('eventsContainer');
            eventsContainer.innerHTML = '';
            
            mockEvents.forEach(event => {
                const checkboxItem = document.createElement('div');
                checkboxItem.className = 'checkbox-item';
                
                checkboxItem.innerHTML = `
                    <input type="checkbox" id="event_${event.event_id}" name="event_id" value="${event.event_id}">
                    <div class="checkbox-content">
                        <h4>${event.event_name}</h4>
                        <p>${event.event_description}</p>
                    </div>
                `;
                
                eventsContainer.appendChild(checkboxItem);
            });
        }

        // è¼‰å…¥è¯çµ¡äººé¸é …
        function loadContacts() {
            const contactsContainer = document.getElementById('contactsContainer');
            contactsContainer.innerHTML = '';
            
            mockContacts.forEach(contact => {
                const checkboxItem = document.createElement('div');
                checkboxItem.className = 'checkbox-item';
                
                checkboxItem.innerHTML = `
                    <input type="checkbox" id="contact_${contact.contact_id}" name="contact_id" value="${contact.contact_id}">
                    <div class="checkbox-content">
                        <h4>${contact.contact_name}</h4>
                        <p>ğŸ“ ${contact.contact_phone}<br>ğŸ“§ ${contact.contact_email}</p>
                    </div>
                `;
                
                contactsContainer.appendChild(checkboxItem);
            });
        }

        // æ›´æ–°é è¦½
        function updatePreview() {
            const formData = new FormData(document.getElementById('multiStepForm'));
            const previewSection = document.getElementById('previewSection');
            
            // ç²å–é¸ä¸­çš„é …ç›®
            const selectedCamera = mockCameras.find(c => c.camera_id == formData.get('camera_id'));
            const selectedModels = Array.from(document.querySelectorAll('input[name="model_id"]:checked'))
                .map(el => mockModels.find(m => m.model_id == el.value)?.model_name).filter(Boolean);
            const selectedEvents = Array.from(document.querySelectorAll('input[name="event_id"]:checked'))
                .map(el => mockEvents.find(e => e.event_id == el.value)?.event_name).filter(Boolean);
            const selectedContacts = Array.from(document.querySelectorAll('input[name="contact_id"]:checked'))
                .map(el => mockContacts.find(c => c.contact_id == el.value)?.contact_name).filter(Boolean);
            
            const projectStatus = document.querySelector('input[name="project_status"]:checked');
            const statusText = projectStatus ? (projectStatus.value === '1' ? 'å•Ÿç”¨' : 'åœç”¨') : 'æœªè¨­å®š';

            previewSection.innerHTML = `
                <h3 style="margin-top: 0; color: #ffffff;">ğŸ“‹ å°ˆæ¡ˆè³‡è¨Šé è¦½</h3>
                
                <div class="preview-item">
                    <span class="preview-label">å°ˆæ¡ˆåç¨±:</span>
                    <span class="preview-value">${formData.get('project_name') || 'æœªè¨­å®š'}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">å°ˆæ¡ˆæè¿°:</span>
                    <span class="preview-value">${formData.get('project_description') || 'ç„¡'}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">å°ˆæ¡ˆç‹€æ…‹:</span>
                    <span class="preview-value">${statusText}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">æ”å½±æ©Ÿ:</span>
                    <span class="preview-value">${selectedCamera ? selectedCamera.camera_name : 'æœªé¸æ“‡'}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">AI æ¨¡å‹:</span>
                    <span class="preview-value">${selectedModels.length > 0 ? selectedModels.join(', ') : 'æœªé¸æ“‡'}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">ç›£æ§äº‹ä»¶:</span>
                    <span class="preview-value">${selectedEvents.length > 0 ? selectedEvents.join(', ') : 'æœªé¸æ“‡'}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">é€šçŸ¥è¯çµ¡äºº:</span>
                    <span class="preview-value">${selectedContacts.length > 0 ? selectedContacts.join(', ') : 'æœªé¸æ“‡'}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">é–‹å§‹æ™‚é–“:</span>
                    <span class="preview-value">${formData.get('start_time') || 'æœªè¨­å®š'}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">æ¯æ—¥é‹ä½œæ™‚é–“:</span>
                    <span class="preview-value">${formData.get('daily_start_time')} - ${formData.get('daily_end_time')}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">é€šçŸ¥æ™‚é–“:</span>
                    <span class="preview-value">${formData.get('notify_start_time')} - ${formData.get('notify_end_time')}</span>
                </div>
                
                <div class="preview-item">
                    <span class="preview-label">é€šçŸ¥é–“éš”:</span>
                    <span class="preview-value">${formData.get('notify_interval')} åˆ†é˜</span>
                </div>
            `;
        }

        // è¡¨å–®æäº¤
        document.getElementById('multiStepForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validateCurrentStep()) {
                return;
            }

            // æ”¶é›†è¡¨å–®è³‡æ–™
            const formData = new FormData(this);
            const projectStatus = document.querySelector('input[name="project_status"]:checked');
            
            const projectData = {
                project_id: projectId,
                project_name: formData.get('project_name'),
                project_description: formData.get('project_description'),
                project_status: projectStatus ? projectStatus.value : '0',
                camera_id: parseInt(formData.get('camera_id')),
                model_ids: Array.from(document.querySelectorAll('input[name="model_id"]:checked')).map(el => parseInt(el.value)),
                event_ids: Array.from(document.querySelectorAll('input[name="event_id"]:checked')).map(el => parseInt(el.value)),
                contact_ids: Array.from(document.querySelectorAll('input[name="contact_id"]:checked')).map(el => parseInt(el.value)),
                start_time: formData.get('start_time'),
                daily_start_time: formData.get('daily_start_time'),
                daily_end_time: formData.get('daily_end_time'),
                notify_start_time: formData.get('notify_start_time'),
                notify_end_time: formData.get('notify_end_time'),
                notify_interval: parseInt(formData.get('notify_interval'))
            };

            console.log('æ›´æ–°å°ˆæ¡ˆè³‡æ–™:', projectData);

            // æ¨¡æ“¬æäº¤
            const submitButton = document.querySelector('.submit-button');
            const originalText = submitButton.textContent;
            submitButton.disabled = true;
            submitButton.textContent = 'ğŸ”„ å„²å­˜ä¸­...';

            // æ’­æ”¾ç«ç®­çˆ†ç‚¸å‹•ç•«
            playRocketExplosion();

            setTimeout(() => {
                alert('âœ… å°ˆæ¡ˆæ›´æ–°æˆåŠŸï¼å³å°‡è·³è½‰åˆ°ä¸»é é¢...');
                window.location.href = 'main.html';
            }, 5000); // å»¶é•·åˆ°5ç§’è®“å‹•ç•«æ’­æ”¾å®Œ

        });

        // åˆå§‹åŒ–
        window.onload = function() {
            loadHeader();
            loadCameras();
            loadModels();
            loadEvents();
            loadContacts();
            loadProjectData(); // è¼‰å…¥ç¾æœ‰å°ˆæ¡ˆè³‡æ–™
            
            showStep(currentStep);
        };
    </script>

</body>
</html>
